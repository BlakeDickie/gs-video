<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="net.landora.animeinfo.data.AnimeMapper">

    <cache />

    <!-- Anime -->

    <insert id="insertShow" parameterType="TVShow">
        Insert Into TVDBShow (
            series_id,
            series_name,
            start_date,
            series_summary,
            series_image_url,
            rating,
            rating_votes
        ) Values (
            #{seriesId},
            #{name,jdbcType=VARCHAR},
            #{startDate,jdbcType=TIMESTAMP},
            #{summary,jdbcType=VARCHAR},
            #{imageUrl,jdbcType=VARCHAR},
            #{rating,jdbcType=NUMERIC},
            #{ratingVotes,jdbcType=INTEGER}
        );
    </insert>

    <update id="updateShow" parameterType="TVShow">
		Update TVDBShow Set
		
			series_name = #{name,jdbcType=VARCHAR},
                        start_date = #{startDate,jdbcType=TIMESTAMP},
                        series_summary = #{summary,jdbcType=VARCHAR},
                        series_image_url = #{imageUrl,jdbcType=VARCHAR},
                        rating = #{rating,jdbcType=NUMERIC},
                        rating_votes = #{ratingVotes,jdbcType=INTEGER}
        Where series_id = #{seriesId}
    </update>

    <update id="deleteShow" parameterType="TVShow">
        Delete From TVDBShow
        Where series_id = #{seriesId}
    </update>

    <update id="deleteShowById" parameterType="int">
        Delete From TVDBShow
        Where series_id = #{seriesId}
    </update>

    <sql id="showColumns">
        S.series_id As show_series_id,
        S.series_name As show_series_name,
        S.start_date As show_start_date,
        S.series_summary As show_series_summary,
        S.series_image_url as show_image_url,
        S.rating as show_rating,
        S.rating_votes as show_rating_votes
    </sql>

    <sql id="showTables">
        TVDBShow as S
    </sql>

    <resultMap id="showResult" type="TVShow">
        <id property="showId" column="show_series_id"/>
        <result property="name" column="show_series_name"/>
        <result property="startDate" column="show_start_date" jdbcType="TIMESTAMP"/>
        <result property="summary" column="show_series_summary"/>
        <result property="imageUrl" column="show_image_url"/>
        <result property="rating" column="show_rating"/>
        <result property="ratingVotes" column="show_rating_vote"/>
    </resultMap>

    <select id="selectShow" parameterType="int" resultMap="showResult">
        Select
        <include refid="animeColumns"/>
        From <include refid="animeColumns"/>
        Where S.series_id = #{id}
    </select>



    
</mapper>
